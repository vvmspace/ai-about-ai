# Проектирование multi-agent workflows

Большинство multi-agent систем падает не из-за моделей, а из-за плохих передач между этапами.
Главная дисциплина здесь — инженерия handoff, а не «красивые роли».

## Начинайте с артефактов

Сначала определите, какие артефакты должны появляться на каждом этапе:

- что передаётся дальше,
- как выглядит критерий приёмки,
- что считается ошибкой.

Только после этого назначайте роли агентам.

## Handoff-контракт обязателен

Каждая передача должна включать:

- схему payload,
- уровень уверенности,
- список открытых рисков,
- правило, что делать при неполных данных.

Без контракта система «тихо деградирует» между шагами.

## Формат коммуникации

Удобный паттерн: двойной формат

- краткое summary для человека,
- структурированный JSON для автоматики.

Так уменьшается двусмысленность и упрощается автоматическая проверка.

## Антипаттерны

- проектировать роли до определения выходных артефактов;
- передавать свободный текст без схемы;
- не фиксировать ownership этапа;
- пытаться оптимизировать всё сразу без узкого pilot-flow.

Итог главы:

**Сильный multi-agent workflow строится на чётких контрактах передачи, а не на количестве агентов.**

---

[Многоагентные workflow](../ai_about_ai_ru/12_agents_multi_agent_workflows.md) | [Multi-Agent Workflows](../ai_about_ai_short/12_agents_multi_agent_workflows.md) |
