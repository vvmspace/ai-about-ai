# Сообщества агентов: роли, стимулы, контроль

Соло-агент в демо — это магия.
Многоагентная система в проде — это политика и операционка.

Как только появляется несколько агентов,
вы проектируете не чат,
а организацию.

## Что меняется после перехода к «обществу агентов»

В одиночном режиме
ошибка = локальный дефект.

В многоагентном режиме
ошибка = системный эффект:

- плохой handoff,
- конфликт ролей,
- стимул к неверному поведению,
- отсутствие арбитража.

Поэтому проектировать нужно не только capability,
но и governance.

## Дизайн ролей: не «персонажи», а ответственность

Плохой подход:
«исследователь», «писатель», «проверяющий»
без описания ответственности.

Хороший подход:
каждая роль владеет конкретным failure mode.

Пример:

- Planner отвечает за полноту scope.
- Researcher отвечает за доказательную базу.
- Synthesizer отвечает за структурную целостность.
- Critic отвечает за обнаружение рисков и противоречий.
- Releaser отвечает за policy-compliant выпуск.

Если failure mode ничей,
он всплывёт в проде.

## Стимулы: что награждаете, то и получаете

Даже агентная система оптимизирует то,
что вы измеряете и поощряете.

Если поощрять только скорость,
качество деградирует.

Если поощрять только нулевой риск,
система перестаёт двигаться.

Нужен баланс:

- correctness,
- latency,
- cost,
- compliance.

И да,
веса этих метрик должны зависеть от класса задачи.

## Separation of powers

Самая опасная конструкция:
один агент одновременно
создаёт,
валидирует,
и выпускает критичный результат.

Это не автономия.
Это неразделённая власть.

Вводите структурное трение:

- creator и evaluator — разные роли,
- high-risk выходы требуют второго ключа,
- policy gate нельзя обходить «по вкусу».

## Контур спокойного контроля (calm-control loop)

Практичный цикл для важных задач:

1. Draft,
2. Adversarial review,
3. Policy gate,
4. Release / Escalate.

Он достаточно быстрый,
чтобы не убить delivery,
и достаточно строгий,
чтобы не ловить повторяющиеся инциденты.

## Невидимые провалы, которые часто игнорируют

### 1) Скрытая коллизия допущений

Агенты начинают подтверждать
одни и те же неверные гипотезы.

### 2) Усталость критика

Один critic-агент превращается
в постоянный bottleneck,
а затем в «штамп одобрения».

### 3) Размытая ответственность за финал

Все сделали «свою часть»,
но никто не владеет результатом end-to-end.

### 4) Метрика «красивого текста»

Система начинает награждать гладкость формулировки,
а не доказуемую корректность.

## Практические меры стабилизации

- Ротация критиков по типам задач.
- Отдельный журнал решений арбитража.
- Обязательная фиксация assumptions на каждом этапе.
- Порог confidence для auto-release.
- Недельный обзор стоимости по стадиям workflow.

Эти меры скучные,
но именно они дают предсказуемость.

## Роль человека: не «ручной костыль», а конституционный слой

Human-in-the-loop нужен не для того,
чтобы переписать всё вручную.

Он нужен,
чтобы определить:

- что нельзя делегировать,
- где нужен двухключевой выпуск,
- какие инциденты требуют изменения правил,
- кто имеет право менять рубрику качества.

Без этого архитектура
скатывается в «кто громче, тот прав».

## Недельный спринт внедрения

День 1: описать роли и failure modes.
День 2: зафиксировать стимулы и веса метрик.
День 3: разделить создание/проверку/выпуск.
День 4: ввести арбитражный протокол.
День 5: прогонить реальный поток и снять метрики.

В конце недели
смотрите не на «красоту» системы,
а на снижение повторяемых дефектов.

## Главная мысль

Многоагентный стек — это организационный дизайн.

Если вы не спроектировали роли,
стимулы,
и контроль,
система сделает это сама.

И почти наверняка — хуже.
