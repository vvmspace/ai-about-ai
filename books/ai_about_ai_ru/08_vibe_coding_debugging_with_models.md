# Отладка вместе с моделью, а не против неё

**Отладка** всегда была психологической игрой, замаскированной под техническую задачу.

Стектрейс выглядит враждебно.
Дедлайн выглядит личным.
Внимание начинает торговаться с тревогой.

Потом в процесс входит ИИ.
И у вас сразу две траектории:

- структурное ускорение,
- или ускоренный хаос.

Большинство команд случайно выбирают второе.

## Миф о «мгновенной починке»

Классический антипаттерн:

> вставить одну строку ошибки, спросить «почини?», скопировать патч и надеяться.

Иногда прокатывает.
Чаще делает цель движущейся:

- исходный баг маскируется,
- появляется побочный баг,
- первопричина остаётся неизвестной.

Это не отладка. Это рулетка с более красивой подсветкой.

## Что изменилось к 2026

Запросы «workflow отладки с ИИ» и «как исправлять код через ChatGPT» — уже не про «умные фрагменты». Людям нужны процессы, которые гасят панику и сохраняют трассируемость.

Рабочая модель проста:

**Смотрите на дебаг как на инженерии гипотез, а ИИ используйте как ускоритель гипотез.**

## Протокол debugging packet

Перед любым запросом к модели соберите пакет.

Минимум:

- точный текст ошибки,
- релевантный кусок кода,
- версии runtime/зависимостей,
- шаги воспроизведения,
- ожидаемое поведение,
- что уже пробовали и что не сработало.

Если чего-то нет, ответы превращаются в догадки.

Хороший packet сначала наводит ясность, а уже потом рождает патч.

## Просите ранжированные гипотезы, а не «финальный ответ»

Рабочий шаблон:

«По этому пакету дай 3 гипотезы первопричины по вероятности. Для каждой — один различающий тест и ожидаемое наблюдение».

Это переводит дебаг из споров мнений в экспериментальный режим.

### Почему это критично

Различающий тест показывает, что *опровергнет* гипотезу.
Одно это движение экономит часы хаотичных правок.

На практике команды с таким подходом быстрее находят root cause, чем команды, которые пытаются «умнее спросить модель».

## Дисциплина минимального патча

Всегда сначала просите минимальный патч:

- минимальный объём,
- явное обоснование,
- риск-заметка,
- план отката.

Большие переписывания прячут исходную причину и создают новые риски.
Малый патч сохраняет причинность.

И даже если патч сработал — это не конец.
«Ошибка исчезла» ≠ «система здорова».

## Чеклист после фикса

После предложенного исправления:

1. заново запускаем исходный repro;
2. прогоняем связанные тесты;
3. добавляем хотя бы один негативный тест;
4. проверяем логи/метрики на побочные эффекты;
5. фиксируем root cause в одной строке.

Эта строка — будущий рычаг команды.

## Полевой пример: фантомный timeout

Backend-команда ловила плавающие timeout-ошибки.
Первые подсказки ИИ советовали оптимизацию запросов.
Звучало логично, но оказалось неверно.

Через packet + ранжирование гипотез выяснилось:

- проблема только в одном регионе деплоя,
- только на пике конкуренции,
- связана с истощением connection pool после config drift.

Фикс занял несколько строк и исправление конфигурации.

Без структурного дебага команда неделю «оптимизировала бы» здоровые запросы.

## Антипаттерны, которые стоит вычистить

### 1) Panic prompt
«СРОЧНО почини». Без данных и воспроизводимости.

### 2) Confirmation debugging
Проверять только любимую гипотезу.

### 3) Patch hoarding
Пробовать пять фиксов до повторной базовой проверки.

### 4) Нет памяти об инцидентах
Исправили и забыли. Класс ошибки возвращается.

## Командный playbook по AI-дебагу

Сделайте `AI_DEBUG.md`:

- шаблон packet,
- шаблон гипотезного запроса,
- правило размера патча,
- обязательные post-fix проверки,
- формат incident note.

Так команда дебажит на одном языке.
А это резко снижает когнитивную нагрузку во время инцидентов.

## Практика на ближайший реальный баг

1. собрать полный debugging packet,
2. запросить ранжированные гипотезы,
3. опровергнуть тестами топ-2,
4. выкатить минимальный патч,
5. опубликовать 5-строчный incident note.

Повторите так 3 инцидента и сравните длительность с прошлым подходом.

## Главный вывод

ИИ не устраняет неопределённость.
Он меняет скорость её исследования.

Если метод грязный, ИИ ускоряет грязь.
Если метод чистый, ИИ ускоряет ясность.

Фраза, которую стоит держать перед глазами:

**Зрелость в отладке — это не скорость патча. Это скорость уменьшения неизвестного без роста риска.**
