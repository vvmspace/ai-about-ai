# 39. Gas Station: круговой маршрут и баланс

Сюрприз задачи в том, что она выглядит как перебор стартов, а решается одним линейным проходом. Довольно элегантно.

Ключевая конструкция:
- `total += gas[i] - cost[i]` — общий баланс по кругу;
- `tank += gas[i] - cost[i]` — баланс на текущем кандидате старта;
- если `tank < 0`, текущий старт невозможен, значит новый старт — `i + 1`, а `tank` сбрасываем.

Два факта, которые нужно озвучить на интервью:
1. Если общий `total < 0`, решения нет в принципе.
2. Если `total >= 0`, старт, найденный описанным сбросом, единственно корректен для прохождения полного круга.

Сложность:
- время: **O(n)**;
- память: **O(1)**.

Термины:
- **cumulative deficit** — накопленный дефицит;
- **restart candidate** — кандидат новой стартовой точки;
- **global feasibility** — глобальная выполнимость маршрута.

Пример на Go:

```go
package main

func canCompleteCircuit(gas []int, cost []int) int {
    total := 0
    tank := 0
    start := 0

    for i := 0; i < len(gas); i++ {
        diff := gas[i] - cost[i]
        total += diff
        tank += diff

        if tank < 0 {
            start = i + 1
            tank = 0
        }
    }

    if total < 0 {
        return -1
    }
    return start
}
```

Пример ответа на интервью:

> “I separate local failure from global feasibility: local tank drops reset the start, and total balance decides whether any solution exists at all.”  
> [«Я разделяю локальный провал и глобальную выполнимость: локальные падения бака сбрасывают старт, а общий баланс решает, существует ли решение вообще».]

Пара фраз для памяти:
- “Local debt can be reset. Global debt cannot.”  
  [«Локальный долг можно сбросить. Глобальный — нет».]
- “One pass. One valid start.”  
  [«Один проход. Один валидный старт».]

Где это в работе: круговые расписания дежурств, баланс поставок по маршрутам, контроль лимитов в циклических джобах.

Это тот редкий момент, когда строгое доказательство и простая реализация совпали почти идеально. Очень полезное ощущение перед более коварными задачами.

Полезные ссылки:
- [Gas Station на LeetCode](https://leetcode.com/problems/gas-station/)
- [Глава про Jump Game](./38_jump_game_greedy_reachability_ru.md)
- [Оглавление книги](./README.md)
